{
    "task_id": "003",
    "type": "code_refactoring",
    "description": "将infra_core中的内存管理相关代码迁移到独立的infra_memory模块，仅进行代码迁移，不改变功能",
    "priority": "high",
    "project_context": {
        "root_dir": "D:/dev/ai-ppdb",
        "source_files": [
            "infra_core.h",
            "infra_core.c"
        ],
        "target_files": [
            "infra_memory.h",
            "infra_memory.c"
        ]
    },
    "reporting": {
        "required": true,
        "interval": "per_step",
        "files": {
            "log": "ppdb/ai/dev/logs/task_003.log",
            "status": "ppdb/ai/dev/status/task_003.json"
        }
    },
    "steps": [
        {
            "step": 1,
            "action": "分析infra_core中的内存管理相关代码",
            "tool": "code_analysis",
            "log_required": {
                "before": "开始分析infra_core中的内存管理代码",
                "during": "识别到的内存管理函数：[函数列表]",
                "after": "完成代码分析，确定需迁移的内容"
            }
        },
        {
            "step": 2,
            "action": "创建infra_memory模块文件",
            "tool": "file_creation",
            "log_required": {
                "before": "准备创建infra_memory.h和infra_memory.c",
                "during": "添加必要的头文件和依赖",
                "after": "基础文件结构创建完成"
            }
        },
        {
            "step": 3,
            "action": "迁移内存管理代码",
            "tool": "code_migration",
            "log_required": {
                "before": "开始迁移内存管理相关代码",
                "during": "迁移函数：[函数名]",
                "after": "代码迁移完成"
            }
        },
        {
            "step": 4,
            "action": "更新infra_core中的引用",
            "tool": "code_update",
            "log_required": {
                "before": "开始更新infra_core中的引用",
                "during": "更新引用：[文件名]",
                "after": "引用更新完成"
            }
        },
        {
            "step": 5,
            "action": "编译测试",
            "tool": "build_test",
            "log_required": {
                "before": "开始编译测试",
                "during": "编译状态：[状态]",
                "after": "编译测试完成"
            }
        }
    ],
    "constraints": [
        "不得修改任何内存管理相关的功能逻辑",
        "不得影响其他模块的功能",
        "必须保持代码的兼容性",
        "迁移前必须完整阅读设计文档",
        "严格遵守项目的目录结构",
        "所有更改必须在指定目录中进行"
    ],
    "success_criteria": [
        "所有内存管理相关代码成功迁移到infra_memory模块",
        "原有功能保持不变",
        "编译测试通过",
        "不影响其他模块"
    ]
} 