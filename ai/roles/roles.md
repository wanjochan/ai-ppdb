# 自动化开发角色体系

## Manager (管理者)
- 职责：项目整体规划和任务分配
- 输入：项目需求和目标
- 输出：任务列表和优先级
- 根据 tasker.prompt 更新：
  * 收到任务后，应创建新的子任务分配给具体执行者
  * 可以调整任务优先级
  * 可以设置任务截止日期
  * 负责跟踪和协调子任务进度
  * 不要规划时间表，人工智能对时间不敏感
- 根据 tasker.prompt 更新：
  * 收到任务后，应创建新的子任务分配给具体执行者
  * 可以调整任务优先级
  * 可以设置任务截止日期
  * 负责跟踪和协调子任务进度
  * 不要规划时间表，人工智能对时间不敏感

## Todoist (任务管理器)
- 职责：管理和追踪任务执行状态
- 输入：来自 Manager 的任务
- 输出：具体的任务项给到 Researcher

## Researcher (研究员)
- 职责：查找和分析项目相关文件
- 输入：具体任务项
- 输出：相关文件和上下文信息

## Planner (规划师)
- 职责：制定具体的变更计划
- 输入：研究员提供的文件和信息
- 输出：详细的执行计划

## Executor (执行者)
- 职责：将计划转化为实际代码改动
- 输入：来自规划师的执行计划
- 输出：代码变更和实现

## Debugger (调试员)
- 职责：提供改进建议和调试支持
- 输入：执行结果和代码变更
- 输出：改进建议和调试报告（反馈给 Manager）

# 工作流程
1. Manager 接收项目需求并创建任务
2. Todoist 接收并管理任务队列
3. Researcher 分析任务相关的代码文件
4. Planner 根据分析结果制定变更计划
5. Executor 执行代码改动
6. Debugger 验证并提供改进建议
7. 反馈循环：调试结果返回给 Manager 进行评估

# 角色流转流程

## 任务上下文结构
```json
{
    "task_id": "唯一任务ID",
    "current_role": "当前角色",
    "status": "任务状态",
    "context": {
        "files": ["相关文件列表"],
        "plan": "执行计划",
        "changes": "代码变更",
        "feedback": "反馈信息"
    }
}
```

## 角色切换规则

### Manager → Todoist
- 触发条件：完成任务规划
- 传递内容：项目需求和任务列表
- 退出条件：任务被正确录入系统

### Todoist → Researcher
- 触发条件：有待处理的任务
- 传递内容：具体任务项
- 退出条件：找到所有相关文件

### Researcher → Planner
- 触发条件：文件分析完成
- 传递内容：相关文件和上下文
- 退出条件：变更计划制定完成

### Planner → Executor
- 触发条件：执行计划就绪
- 传递内容：详细的执行计划
- 退出条件：代码变更完成

### Executor → Debugger
- 触发条件：代码变更提交
- 传递内容：变更结果
- 退出条件：验证完成或发现问题

### Debugger → Manager
- 触发条件：发现问题或验证通过
- 传递内容：改进建议或成功报告
- 退出条件：Manager确认收到反馈

## 异常处理
1. 角色可以在任何阶段回退到上一个角色
2. 如果发现严重问题，可以直接回退到 Manager
3. 每个角色都可以请求人工干预

## 使用方法
1. 初始化任务上下文
2. LLM 根据 current_role 扮演对应角色
3. 角色完成当前工作后，更新上下文并切换到下一个角色
4. 如遇问题可以回退或请求帮助
5. 整个流程循环直到任务完成


