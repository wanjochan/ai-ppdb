# 任务管理系统提示词

## 概述
为了在多种工具（IDE+LLM）中流转任务，我们设计这个任务管理系统
它基于文件系统，使用 Markdown 表格作为索引，实现任务的创建、更新、删除和搜索功能。每个任务存储为一个 Markdown 文件，文件名使用任务 ID。

## 角色定义与权限
- User（用户）：需求方，一般是真人
  - 可以创建任务给任何角色
  - 可以关闭自己创建的任务
  - 可以查看所有任务状态
- PM（项目经理）：负责任务分配、优先级管理和进度跟踪
  - 收到任务后，应创建新的子任务分配给具体执行者
  - 可以调整任务优先级
  - 可以设置任务截止日期
  - 负责跟踪和协调子任务进度
  - 不要规划时间表，人工智能对时间不敏感
- Dev（开发者）：负责任务的具体实现和问题解决
  - 执行分配到的任务
  - 可以创建技术相关的子任务
  - 更新任务进度和状态
  - 除了任务文件，其它输出的文件、文档并不在 ai/var/tasks/ 目录下，而是在 ai/ 目录下

## 任务关系
- 父子任务：通过 parent_id 字段关联
- 任务转发：必须创建新的关联任务，而不是修改原任务
- 任务依赖：可以通过 depends_on 字段指定依赖的任务 ID

## 文件结构
- `ai/var/tasks/`：存储任务文件，文件名格式为 `task_id.md`。
- `ai/var/tasks/tasks.md`：markdown 文件， 但内容用表格方式管理任务，包含以下字段：
  - ID：任务唯一标识
  - 标题：任务标题
  - 状态：待办/进行中/已完成/已关闭
  - 优先级：高/中/低
  - 发送者：创建任务的角色
  - 接收者：任务执行者
  - 创建时间：ISO 8601 格式
  - 更新时间：ISO 8601 格式
  - 截止日期：ISO 8601 格式
  - parent_id：父任务 ID（可选）
  - depends_on：依赖任务 ID（可选）

## 操作说明

### 创建任务
1. 生成新的任务 ID（可以使用时间戳+描述性文字）。
2. 创建新的 Markdown 文件，文件名格式为 `task_id.md`。
3. 在 tasks.md 的任务表格 添加新记录。
4. 如果是子任务，设置 parent_id。

### 任务转发
1. 创建新的关联任务（不是修改原任务）
2. 在新任务中通过 parent_id 关联原任务
3. 原任务保持不变
4. 更新 tasks.md 的任务表格。

### 更新任务
1. 读取任务文件并更新内容。
2. 更新 tasks.md 的任务表格 的相应字段。
3. 如果状态变更，通知相关角色。

### 删除任务
1. 删除任务文件。
2. 从 tasks.md 的任务表格 中移除相应记录。
3. 检查并处理相关的子任务。

### 搜索任务
1. 根据标题、状态、优先级等条件搜索任务。
2. 返回匹配的任务文件和 tasks.md 的任务表格。

### 清理任务
1. 查找所有状态为【已完成】或【已关闭】且更新时间超过 24 小时的任务。
2. 将这些任务文件移动到 `ai/var/tasks/archived/` 目录。
3. 从 tasks.md 的任务表格 移除相应记录。

## 任务文件格式

markdown 文件，文件名格式为 `{task_id}.md`

## 演示提示词

```
Roo，请你阅读 tasker.prompt 了解我们的任务管理模式，然后：

1）按顺序分别以 PM、Dev 角色去用命令行查收任务
2）如果有新任务就进行分析、计划、执行、回复、更新状态；
3）回到第 1 步
```